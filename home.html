<head>
    <!-- Font Awesome -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.min.css"
  rel="stylesheet"
/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <script src="/socket.io/socket.io.js"></script>
    <script>
       
       

       document.addEventListener('DOMContentLoaded', function() {
        const socket = io();
        const form = document.getElementById('form');
        const input = document.getElementById('chat');
        const messages = document.getElementById('messages');

        form.addEventListener('submit',(e)=>{
            e.preventDefault();
            console.log("Message sent")
            if (input.value){
                socket.emit('chat message',input.value);
                input.value='';
            }
        });
        socket.on('chat message', (msg) => {
            
            let item=`
            <div class="card m-3" style="width: 18rem; border-radius: 15px; background-color: rgba(57, 192, 237,.2);">
               <div class="card-body">
                 <div class="d-flex flex-row">
                 <p class="card-text">
                 </div>
            `
            item+=msg+`</p>
               </div>
            </div> `

            messages.innerHTML+=item
            window.scrollTo(0, document.body.scrollHeight);
        });
       




        });
        
      
    </script>
 </head>
 <body>
    <div class="container-fluid text-center">
    <div class="col px-5">
       <div class="card my-3  shadow p-3 mb-5 bg-body rounded">
          <div class="card-header shadow-sm p-3 mb-5 bg-body rounded m-3">
             <h3>Messages</h3>
          </div>
          <div class="card-body">
             <div>
                <div class="card-body">
                   <h1>
                      Messages will appear here
                   </h1>
                   <div class="d-flex flex-column">
                    
                     <div id="messages"></div>
                   </div>
                </div>
                <form id="form">
                <div class="d-flex flex-row">
                    
                      <input id="chat" class="form-control form-control-lg">
                      <button class="btn btn-dark m-3" data-mdb-ripple-init>Send</button>
                    
             
                   
                </div>
                </form>     
             </div>
           
          </div>
       </div>
    </div>
    <script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"
></script>
 </body>
 